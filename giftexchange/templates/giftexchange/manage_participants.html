{% extends 'giftexchange/base.html' %}

{% block page_content %}
	<h2>{{giftexchange.title}} Participants</h2>
	<div class="row">
		<div class="col">
		<table class="table table-bordered">
			<tr>
				<th>Admin</th>
				<th>Participant</th>
				<th></th>
				<th></th>
			</tr>
			{% for participant in participants %}
				<tr>
					<td>
						{% if participant.appuser in giftexchange.admin_appuser.all %}
							Y
						{% endif %}
					</td>
					<td><a href="{% url 'giftexchange_detail_appuser' giftexchange_id=giftexchange.pk appuser_id=participant.appuser.pk %}">{{participant.appuser}}</a></td>
					<td>
						<a href="{% url 'giftexchange_remove_participant' giftexchange_id=giftexchange.pk participant_id=participant.pk %}"><button class="btn btn-danger">Remove</button></a>
					</td>
					<td>
						{% if not participant.appuser in giftexchange.admin_appuser.all %}
							<a href="{% url 'giftexchange_add_participant_admin' giftexchange_id=giftexchange.pk participant_id=participant.pk %}"><button class="btn btn-primary">Make Admin</button></a>
						{% else %}
							{% if participant.appuser.djangouser != request.user %}
								<a href="{% url 'giftexchange_remove_participant_admin' giftexchange_id=giftexchange.pk participant_id=participant.pk %}"><button class="btn btn-warning">Remove from Admin</button></a>
							{% else %}
								<button class="btn btn-warning" disabled>Remove from Admin</button>
							{% endif %}
						{% endif %}
					</td>
				</tr>
			{% endfor %}
		</table>
		<a href="{% url 'giftexchange_upload_participants' giftexchange_id=giftexchange.pk%}"><button class="btn btn-primary">Upload Participants</button></a>
		</div>
	</div>
{% endblock %}